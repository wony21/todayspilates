<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="m.todays.pilates.domain.user.UserMapper">
    <select id="getUser" resultType="camelmap" statementType="PREPARED">
        SELECT *
        FROM USER_M
    </select>
    <select id="loginUser" parameterType="hashmap" resultType="camelmap" statementType="PREPARED">
        SELECT USER_CD AS "username", USER_PS as "password"
        FROM USER_M
        WHERE USER_CD = #{userCd}
        	AND USER_PS = #{userPs}
    </select>
    <select id="existStorInUser" parameterType="hashmap" resultType="camelmap" statementType="PREPARED">
    	SELECT CASE WHEN STOR_CD = #{storCd} THEN TRUE ELSE FALSE END USER_FG
    	FROM USER_M
    	WHERE USER_CD = #{userCd}
    </select>
    <select id="getUserInfo" parameterType="hashmap" resultType="User" statementType="PREPARED">
        SELECT COMP_CD AS "compCd", 
        	STOR_CD as "storCd",
        	USER_CD AS "userCd", 
        	USER_PS as "userPS",
        	USER_NM as "userNm",
        	USER_LV AS "userLv",
        	MIS_MENU_TY as "misMenuTy",
        	MIS_USER_GRP as "misUserGrp",
        	MEMBER_NO as "memberNo",
        	EMP_NO as "empNo"
        FROM USER_M
        WHERE USER_CD = #{userCd}
        	AND USER_PS = #{userPs}
    </select>
</mapper>